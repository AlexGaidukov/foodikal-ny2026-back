name = "foodikal-ny-backend"
main = "src/index.py"
compatibility_date = "2025-01-07"
compatibility_flags = ["python_workers"]

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "foodikal_ny_db"
database_id = "0622155a-1db7-4cc0-b6ce-755cc731ce40"

# KV Namespace for rate limiting
[[kv_namespaces]]
binding = "RATE_LIMIT_KV"
id = "73445e5e5c454de99b72ab06b6b2d864"
preview_id = "d452503f49be47ac85b6a1e026fdbdf5"

# Service binding to Excel generator worker
[[services]]
binding = "EXCEL_GENERATOR"
service = "foodikal-ny-excel-generator"

# Secrets are managed via: wrangler secret put <SECRET_NAME>
# Required secrets:
# - TELEGRAM_BOT_TOKEN
# - TELEGRAM_CHAT_ID
# - ADMIN_PASSWORD_HASH

[env.production]
vars = { ENVIRONMENT = "production" }

[env.development]
vars = { ENVIRONMENT = "development" }
